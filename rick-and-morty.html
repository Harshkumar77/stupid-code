<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh">
    <title>Redirecting...</title>
    <script src="utils.js"></script>
    <script>
        window.onload = function () {
            const baseURL = "https://braflix.gd/tv/60625/";
            const urlStack = new URLStack()

            if (urlStack.empty()) {
                const SEASONS = 7
                const EPISODES = 10
                const epis = Array(SEASONS)
                    .fill(0)
                    .map((_, i) => i + 1)
                    .map((s) =>
                        Array(EPISODES)
                            .fill(0)
                            .map((_, i) => `${s}/${i + 1}`)
                    )
                    .flat();

                epis.push("1/11")

                epis
                    .sort(() => 0.5 - Math.random())
                    .forEach(_ => urlStack.softPush(_))

                urlStack.save()
            }

            const redirectURL = baseURL + urlStack.pop() + "?play=true";
            console.clear();
            console.log(redirectURL);
            document.getElementById("msg").innerText = redirectURL;
            window.location.href = redirectURL;
        };
    </script>

</head>

<body>
    <p id="msg">Redirecting...</p>
</body>

</html>